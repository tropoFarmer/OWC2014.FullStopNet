@using MetroBlooms.Utilities
@model MetroBlooms.ViewModels.EventsViewModel

<div class="contentPage">
    <div class="contentPage-bg" style="background-image:url('@Model.HeaderImage.UrlWithConstraints(1400,480)')"></div>
    <div class="container">
        <div class="grid">
            <div class="grid-col grid-col_secondary">
                <div class="colNav">
                    <ul>
                        @foreach (var link in Model.SubLinks)
                        {
                            <li class="@(link.Active?"active":"")">
                                <a href="@link.Url" target="@(link.NewWindow?"_blank":"_self")">@link.Title</a>
                                @if (link.ChildLinks.Any())
                                {
                                    <div class="colNav-sub">
                                        <ul>
                                            @foreach (var subLink in link.ChildLinks)
                                            {
                                                <li class="@(subLink.Active ? "active" : "")"><a href="@subLink.Url" target="@(subLink.NewWindow ? "_blank" : "_self")">@subLink.Title</a></li>
                                            }
                                        </ul>
                                    </div>
                                }
                            </li>
                        }

                    </ul>
                </div>
            </div> <!-- /.grid-col -->

            <div class="grid-col grid-col_primary">
                
                <div class="content">
                    <h1 class="hdg hdg_1">Events</h1>
                    
                    <div class="events">
                        <ul>
                            @foreach (var evt in Model.Events)
                            {
                                <li class="js-toggleActive-target">
                                    <div class="event-heading js-toggleActive-activator">
                                        <div class="date">@if (evt.Date.HasValue)
                                                          {
                                                              @evt.Date.Value.ToString("MMM").ToUpper()
                                                              <br />
                                                              @evt.Date.Value.ToString("dd")
                                                          } 
                                        </div>
                                        <a href="#">@evt.Name</a>
                                    </div>
                                    <div class="event-description">
                                        <div class="address">
                                            <h4 class="hdg_4">Address</h4>
                                            <a target="_blank" href="@evt.GoogleMapUrlString">@evt.LocationString</a>
                                        </div>
                                        @Html.Raw(evt.Description)
                                        <div class="event-description-actions">
                                            <a class="btn" href="@(Config.WorkshopSignupUrl+evt.Id)">
                                                Sign Up
                                            </a>
                                            <a class="btn" href="@(Config.WorkshopDetailsUrl + evt.Workshop_Desc_Id)">
                                                Details
                                            </a>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <span class="js-toggleActive-activator after"></span>
                                </li>
                            }
                        </ul>
                    </div>
                </div> <!-- /.content -->

                
            </div> <!-- /.grid-col -->
        </div> <!-- /.grid -->
    </div> <!-- /.container -->
</div> <!-- /.section -->
